See https://codereview.stackexchange.com/questions/201658/sql-php-laravel-looping-through-records-to-find-relationships
